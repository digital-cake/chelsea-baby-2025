{% assign section_id = section.id | replace: "_", "" | replace: "-", "" %}
{% render "section-styles", section_id: section_id, section: section %}

{%- render 'vite' with '@sectionStyles/_main-article.scss' -%}

<div class="wrap wrap--article wrap--{{ section_id }}">

    <div class="section-article__inner">

        {{ article.content }}

    </div>
    
</div>

<script type="application/ld+json">
{
    "@context": "http://schema.org",
    "@type": "Article",
    "articleBody": {{ article.content | strip_html | json }},
    "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": {{ request.origin | append: page.url | json }}
    },
    "headline": {{ article.title | json }},
    {% if article.excerpt != blank %}
    "description": {{ article.excerpt | strip_html | json }},
    {% else %}
    "description": {{ article.content | strip_html | truncatewords: 20 | json }}
    {% endif %}
    {% if article.image %}
    "image": [
        {{ article | image_url: width: 1920 | prepend: "https:" | json }}
    ],
    {% endif %}
    "datePublished": {{ article.published_at | date: '%Y-%m-%dT%H:%M:%SZ' | json }},
    "dateCreated": {{ article.created_at | date: '%Y-%m-%dT%H:%M:%SZ' | json }},
    "author": {
    "@type": "Person",
    "name": {{ article.author | json }}
    },
    "publisher": {
    "@type": "Organization",
    "name": {{ shop.name | json }}
    }
}
</script>

{% schema %}
{
    "name": "Article",
    "tag": "section",
    "class": "section-article",
    "settings": [
        {
            "type": "header",
            "content": "Desktop padding"
        },
        {
            "type": "range",
            "id": "padding_top",
            "min": 0,
            "max": 128,
            "step": 4,
            "unit": "px",
            "label": "Padding top",
            "default": 64
        },
        {
            "type": "range",
            "id": "padding_bottom",
            "min": 0,
            "max": 128,
            "step": 4,
            "unit": "px",
            "label": "Padding bottom",
            "default": 84
        },
        {
            "type": "header",
            "content": "Mobile padding"
        },
        {
            "type": "range",
            "id": "mobile_padding_top",
            "min": 0,
            "max": 128,
            "step": 4,
            "unit": "px",
            "label": "Padding top",
            "default": 24
        },
        {
            "type": "range",
            "id": "mobile_padding_bottom",
            "min": 0,
            "max": 128,
            "step": 4,
            "unit": "px",
            "label": "Padding bottom",
            "default": 44
        }
    ]
}
{% endschema %}