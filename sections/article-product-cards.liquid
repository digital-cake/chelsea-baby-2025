 {% if section.settings.products != blank %}
    {% assign section_id = section.id | replace: "_", "" | replace: "-", "" %}
    {% render "section-styles", section_id: section_id, section: section %}

    {%- render 'vite' with '@sectionStyles/_article-product-cards.scss' -%}
    {%- render 'vite' with '@@/components/article-product-cards.js' -%}

    <div class="wrap wrap--article wrap--{{ section_id }}">
        {% if section.settings.title != blank %}
            <div class="section-product-cards__header">
                <h4 class="small">{{ section.settings.title }}</h4>
                {% if section.settings.link != blank and section.settings.link_label != blank %}
                    <a class="button-text button-text--black" href="{{ section.settings.link }}"><span>{{ section.settings.link_label }}</span></a>
                {% endif %}
            </div>
        {% endif %}
        <div class="section-product-cards__inner">
           <div class="swiper swiper-{{ section_id }}">
                <div class="swiper-wrapper">
                    {% for product in section.settings.products %}
                        <div class="swiper-slide">
                            {% render 'card-product', product: product %}
                        </div>
                    {% endfor %}
                </div>
           </div>
            <div class="swiper-navigation">
                <div class="swiper-button-prev swiper-button-prev-{{ section_id }}"></div>
                <div class="swiper-button-next swiper-button-next-{{ section_id }}"></div>
            </div>
        </div>
    </div>

    <script>
        window.addEventListener('DOMContentLoaded', function() {
            window.init_article_product_cards_slider({{ section_id | json }});
        });
        if (Shopify.designMode) {
            document.addEventListener('shopify:section:load', function() {
                window.init_article_product_cards_slider({{ section_id | json }});
            });
        };
    </script>
{% endif %}

{% schema %}
{
    "name": "Article Product Cards",
    "tag": "section",
    "class": "section-product-cards",
    "settings": [
        {
            "type": "text",
            "id": "title",
            "label": "Title",
            "default": "Shop this blog"
        },
        {
            "type": "product_list",
            "limit": 3,
            "id": "products",
            "label": "Products"
        },
        {
            "type": "url",
            "id": "link",
            "label": "Link"
        },
          {
            "type": "text",
            "id": "link_label",
            "label": "Link Label"
        },
        {
            "type": "header",
            "content": "Desktop padding"
        },
        {
            "type": "range",
            "id": "padding_top",
            "min": 0,
            "max": 128,
            "step": 2,
            "unit": "px",
            "label": "Padding top",
            "default": 64
        },
        {
            "type": "range",
            "id": "padding_bottom",
            "min": 0,
            "max": 128,
            "step": 2,
            "unit": "px",
            "label": "Padding bottom",
            "default": 64
        },
        {
            "type": "header",
            "content": "Mobile padding"
        },
        {
            "type": "range",
            "id": "mobile_padding_top",
            "min": 0,
            "max": 128,
            "step": 2,
            "unit": "px",
            "label": "Padding top",
            "default": 32
        },
        {
            "type": "range",
            "id": "mobile_padding_bottom",
            "min": 0,
            "max": 128,
            "step": 2,
            "unit": "px",
            "label": "Padding bottom",
            "default": 32
        }
    ],
    "presets": [
        {
            "name": "Article Product Cards"
        }
    ],
    "templates": ["article"]
}
{% endschema %}