{% assign section_id = section.id | replace: "_", "" | replace: "-", "" %}
{% render "section-styles", section_id: section_id, section: section %}

{%- render 'vite' with '@sectionStyles/_main-brands.scss' -%}

<div class="wrap wrap--{{ section.settings.width }} wrap--{{ section_id }}">

    {% assign chars = '' %}
    {% for vendor in shop.vendors %}
        {% capture first_char %}{{ vendor | truncate: 1, '' | upcase }}{% endcapture %}
    
        {% if forloop.first %}
        <div class="section-brands-list__inner">
        {% endif %}
    
        {% unless chars contains first_char %}
        {% unless forloop.first %}
        </ul>
        </div>
        {% endunless %}
        <div class="section-brands-list__letter" data-letter="{{ first_char }}">
        <div class="section-brands-list__letter__inner">
            <p>{{ first_char }}</p>
        </div>
        <ul>
        {% capture temp %}{{ chars }}{{ first_char }}{% endcapture %}
        {% assign chars = temp %}
        {% endunless %}
        {% assign vendor_name= vendor | handle %}
        {% unless vendor_name == "route" %}
        <li><a href="{{ routes.root_url }}collections/{{ vendor | handle }}">{{ vendor }}</a></li>
        {% endunless %}
    {% endfor %}

</div>

<script src="{{ "brands-list.js" | asset_url }}" defer></script>

{% schema %}
{
    "name": "Brands List",
    "tag": "section",
    "class": "section-brands-list",
    "settings": [
        {
            "type": "select",
            "id": "width",
            "label": "Width",
            "options": [
                {
                    "value": "medium",
                    "label": "Small"
                },
                {
                    "value": "large",
                    "label": "Medium"
                },
                {
                    "value": "x-large",
                    "label": "Large"
                },
                {
                    "value": "xx-large",
                    "label": "Full Width"
                }
            ],
            "default": "xx-large"
        },
        {
            "type": "header",
            "content": "Desktop padding"
        },
        {
            "type": "range",
            "id": "padding_top",
            "min": 0,
            "max": 128,
            "step": 4,
            "unit": "px",
            "label": "Padding top",
            "default": 0
        },
        {
            "type": "range",
            "id": "padding_bottom",
            "min": 0,
            "max": 128,
            "step": 4,
            "unit": "px",
            "label": "Padding bottom",
            "default": 96
        },
        {
            "type": "header",
            "content": "Mobile padding"
        },
        {
            "type": "range",
            "id": "mobile_padding_top",
            "min": 0,
            "max": 128,
            "step": 4,
            "unit": "px",
            "label": "Padding top",
            "default": 0
        },
        {
            "type": "range",
            "id": "mobile_padding_bottom",
            "min": 0,
            "max": 128,
            "step": 4,
            "unit": "px",
            "label": "Padding bottom",
            "default": 48
        }
    ]
}
{% endschema %}